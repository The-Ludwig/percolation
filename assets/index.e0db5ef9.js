var H=Object.defineProperty;var T=(e,t,i)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var o=(e,t,i)=>(T(e,typeof t!="symbol"?t+"":t,i),i);import{s as x,z as j,i as z,t as A}from"./vendor.f720daf1.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const L of r.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&l(L)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};O();const s=1e3,S=100,d=x("#mySVG"),g=d.node().clientWidth,b=d.node().clientHeight;d.attr("viewBox",String([0,0,g,b])).attr("width",g).attr("height",b);d.node().addEventListener("click",P);const m=d.append("g"),k=j().touchable(()=>!0).scaleExtent([.25,16]).on("zoom",G);function G(e){const{transform:t}=e;m.attr("transform",t)}function P(){d.transition().duration(750).call(k.transform,z,A(d.node()).invert([g/2,b/2]))}const B=x("#percButton").node(),u=x("#pSlider").node(),f=x("#xSlider").node(),y=x("#ySlider").node();let _=Number(u.value),h=Number(f.value),a=Number(y.value);const w=2;u.previousElementSibling.innerHTML=`p=${_.toFixed(2)}`;f.previousElementSibling.innerHTML=`N_x=${h.toFixed(0)}`;y.previousElementSibling.innerHTML=`N_y=${a.toFixed(0)}`;u.addEventListener("input",()=>{let e=Number(u.value);u.previousElementSibling.innerHTML=`p=${e.toFixed(2)}`});f.addEventListener("input",()=>{let e=Number(f.value);f.previousElementSibling.innerHTML=`N_x=${e.toFixed(0)}`});y.addEventListener("input",()=>{let e=Number(y.value);y.previousElementSibling.innerHTML=`N_y=${e.toFixed(0)}`});u.addEventListener("change",e=>{_=Number(u.value),$(_),E(),N(s)});let p=!0;f.addEventListener("change",()=>{p=!0});y.addEventListener("change",()=>{p=!0});B.addEventListener("click",()=>{p?(F(),p=!1):($(Number(u.value)),E(),N(s))});let c=[],v=[];class q{constructor(t,i,l,n,r){o(this,"x_int");o(this,"y_int");o(this,"x");o(this,"y");o(this,"occupied");o(this,"lines");o(this,"cluster");o(this,"html");this.x_int=t,this.y_int=i,this.x=l,this.y=n,this.occupied=r,this.cluster=void 0,this.lines=[]}get index(){return this.x_int*a+this.y_int}}class M{constructor(t,i){o(this,"x1");o(this,"y1");o(this,"x2");o(this,"y2");o(this,"cluster");o(this,"html");o(this,"n1");o(this,"n2");o(this,"_active");this.n1=t,this.n2=i,this.x1=t.x,this.y1=t.y,this.x2=i.x,this.y2=i.y,this.n1.lines.push(this),this.n2.lines.push(this)}calc_active(){this._active=this.n1.occupied&&this.n2.occupied}get active(){return this.n1.occupied&&this.n2.occupied}}function $(e){for(let t of c)t.occupied=Math.random()<e}function I(){v=[];for(let e=0;e<a;e++){let t=c[e];for(let i=1;i<h;i++){let l=c[i*a+e];v.push(new M(t,l)),t=l}}for(let e=0;e<h;e++){let t=c[e*a];for(let i=1;i<a;i++){let l=c[e*a+i];v.push(new M(t,l)),t=l}}}function K(){let e=5,t=5,i=(g-10)/(h-1),l=(b-10)/(a-1);c=[];for(let n=0;n<h;n++)for(let r=0;r<a;r++)c.push(new q(n,r,e+i*n,t+l*r,Math.random()<_))}function N(e=0){p?m.selectAll("line").data(v).join("line").attr("x1",t=>t.x1).attr("x2",t=>t.x1).attr("y1",t=>t.y1).attr("y2",t=>t.y1).attr("stroke",t=>t.active?"black":null).transition().duration(s).delay(e).attr("y2",t=>t.y2).attr("x2",t=>t.x2):m.selectAll("line").data(v).join("line").transition().duration(s/2).attr("x1",t=>t.x1).attr("x2",t=>t.x1).attr("y1",t=>t.y1).attr("y2",t=>t.y1).attr("stroke",t=>t.active?"black":null).transition().duration(s).delay(e).attr("y2",t=>t.y2).attr("x2",t=>t.x2)}function E(){p?m.selectAll("circle").data(c).join("circle").transition().duration(s).attr("cx",e=>e.x).attr("cy",e=>e.y).attr("r",w).attr("fill",e=>"black").transition().delay(S).duration(s).attr("fill",e=>e.occupied?"black":"rgba(0,0,0,0)"):m.selectAll("circle").data(c).join("circle").attr("cx",e=>e.x).attr("cy",e=>e.y).attr("r",w).transition().duration(s/2).attr("fill",e=>"black").transition().delay(S).duration(s).attr("fill",e=>e.occupied?"black":"rgba(0,0,0,0)")}function F(){h=Number(f.value),a=Number(y.value),K(),I(),E(),N(s)}d.call(k);F();
